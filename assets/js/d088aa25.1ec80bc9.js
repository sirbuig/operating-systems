"use strict";(self.webpackChunkoperating_systems=self.webpackChunkoperating_systems||[]).push([[9062],{4707:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var n=s(4848),i=s(8453);const r={sidebar_position:3},o="Mutex Locks",c={id:"week-6/mutex-locks",title:"Mutex Locks",description:"Operating-system designers build higher-level software tools to solve the critical-section problem. The simplest of these tools is the mutex lock.",source:"@site/docs/week-6/mutex-locks.md",sourceDirName:"week-6",slug:"/week-6/mutex-locks",permalink:"/operating-systems/week-6/mutex-locks",draft:!1,unlisted:!1,editUrl:"https://github.com/sirbuig/operating-systems/tree/main/docs/week-6/mutex-locks.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"The Critical-Section Problem",permalink:"/operating-systems/week-6/critical-section"},next:{title:"Semaphores",permalink:"/operating-systems/week-6/semaphores"}},l={},d=[{value:"POSIX API",id:"posix-api",level:2},{value:"<code>pthread_mutex_init()</code>",id:"pthread_mutex_init",level:3},{value:"<code>pthread_mutex_(un)lock()</code>",id:"pthread_mutex_unlock",level:3}];function a(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"mutex-locks",children:"Mutex Locks"})}),"\n",(0,n.jsxs)(t.p,{children:["Operating-system designers build higher-level software tools to solve the critical-section problem. The simplest of these tools is the ",(0,n.jsx)(t.strong,{children:"mutex lock"}),"."]}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Mutex"})," is short for ",(0,n.jsx)(t.strong,{children:"mut"}),"ual ",(0,n.jsx)(t.strong,{children:"ex"}),"clusion."]})}),"\n",(0,n.jsxs)(t.p,{children:["We use the mutex lock to protect critical sections and thus prevent race conditions. A process must ",(0,n.jsx)(t.strong,{children:"acquire"})," the lock before entering a critical section and ",(0,n.jsx)(t.strong,{children:"release"})," the lock when it exits the critical section."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"mutex locks",src:s(5531).A+"",width:"371",height:"338"})}),"\n",(0,n.jsx)(t.h2,{id:"posix-api",children:"POSIX API"}),"\n",(0,n.jsx)(t.h3,{id:"pthread_mutex_init",children:(0,n.jsx)(t.code,{children:"pthread_mutex_init()"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *attr);\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This creates an object of type ",(0,n.jsx)(t.code,{children:"mutex"})," with ",(0,n.jsx)(t.code,{children:"attr"})," attributes (for default, use ",(0,n.jsx)(t.strong,{children:"NULL"}),")."]}),"\n",(0,n.jsx)(t.p,{children:"Put the variable in a zone where all threads can see it."}),"\n",(0,n.jsx)(t.h3,{id:"pthread_mutex_unlock",children:(0,n.jsx)(t.code,{children:"pthread_mutex_(un)lock()"})}),"\n",(0,n.jsxs)(t.p,{children:["A mutex can be either ",(0,n.jsx)(t.strong,{children:"locked"})," or ",(0,n.jsx)(t.strong,{children:"unlocked"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"When the mutex is locked, a thread holds the control of the critical section until he gives up."}),"\n",(0,n.jsx)(t.p,{children:"The critical section must be delimited by the functions:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"pthread_mutex_lock(&mtx);\n\n/* critical section */\n\npthread_mutex_unlock(&mtx);\n"})}),"\n",(0,n.jsxs)(t.p,{children:["When we don't need the object anymore, we delete it using ",(0,n.jsx)(t.code,{children:"pthread_mutex_destroy(pthread_mutex_t *mutex)"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},5531:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/mutex-locks-4018b16f4cfa281788108d8fa7719a10.png"},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>c});var n=s(6540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);